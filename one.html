<!DOCTYPE html>
<html>
  <head>
    <title>Comment Box</title>
  </head>
  <body>
    <h1>Comment Box</h1>
    <div id="comment-container"></div>
    <form id="comment-form">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name"><br><br>
      <label for="comment">Comment:</label>
      <textarea id="comment" name="comment"></textarea><br><br>
      <button type="submit">Submit</button>
    </form>
    <script>// Load comments from XML file
function loadComments() {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var xmlDoc = this.responseXML;
      var comments = xmlDoc.getElementsByTagName('comment');
      var commentContainer = document.getElementById('comment-container');
      for (var i = 0; i < comments.length; i++) {
        var commentDiv = document.createElement('div');
        commentDiv.className = 'comment-box';
        var nameElem = comments[i].getElementsByTagName('name')[0];
        var name = nameElem.childNodes[0].nodeValue;
        var commentElem = comments[i].getElementsByTagName('text')[0];
        var commentText = commentElem.childNodes[0].nodeValue;
        var namePara = document.createElement('h5');
        var nameNode = document.createTextNode(name);
        namePara.appendChild(nameNode);
        var commentPara = document.createElement('p');
        var commentNode = document.createTextNode(commentText);
        commentPara.appendChild(commentNode);
        commentDiv.appendChild(namePara);
        commentDiv.appendChild(commentPara);
        commentContainer.appendChild(commentDiv);
      }
    }
  };
  xmlhttp.open('GET', 'comments.xml', true);
  xmlhttp.send();
}

// Save comment to XML file
function saveComment(name, comment) {
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var xmlDoc = this.responseXML;
      var newComment = xmlDoc.createElement('comment');
      var newName = xmlDoc.createElement('name');
      var nameText = xmlDoc.createTextNode(name);
      newName.appendChild(nameText);
      var newText = xmlDoc.createElement('text');
      var commentText = xmlDoc.createTextNode(comment);
      newText.appendChild(commentText);
      newComment.appendChild(newName);
      newComment.appendChild(newText);
      xmlDoc.getElementsByTagName('comments')[0].appendChild(newComment);
      var xmlString = new XMLSerializer().serializeToString(xmlDoc);
      localStorage.setItem('comments', xmlString);
      renderComment(name, comment);
    }
  };
  xmlhttp.open('GET', 'comments.xml', true);
  xmlhttp.send();
}

// Render new comment
function renderComment(name, comment) {
  var commentDiv = document.createElement('div');
  commentDiv.className = 'comment-box';
  var namePara = document.createElement('h5');
  var nameNode = document.createTextNode(name);
  namePara.appendChild(nameNode);
  var commentPara = document.createElement('p');
  var commentNode = document.createTextNode(comment);
  commentPara.appendChild(commentNode);
  commentDiv.appendChild(namePara);
  commentDiv.appendChild(commentPara);
  document.getElementById('comment-container').appendChild(commentDiv);
  document.getElementById('name').value = '';
  document.getElementById('comment').value = '';
}

// Load existing comments on page load
window.onload = function() {
loadComments();
};

// Save comment on form submit
document.getElementById('comment-form').addEventListener('submit', function(event) {
event.preventDefault();
var name = document.getElementById('name').value;
var comment = document.getElementById('comment').value;
if (name && comment) {
saveComment(name, comment);
}
});

// Clear comments
document.getElementById('clear-comments').addEventListener('click', function() {
var commentContainer = document.getElementById('comment-container');
while (commentContainer.firstChild) {
commentContainer.removeChild(commentContainer.firstChild);
}
localStorage.removeItem('comments');
});

// Load comments from localStorage on page load
var comments = localStorage.getItem('comments');
if (comments) {
var parser = new DOMParser();
var xmlDoc = parser.parseFromString(comments, 'text/xml');
var savedComments = xmlDoc.getElementsByTagName('comment');
for (var i = 0; i < savedComments.length; i++) {
var nameElem = savedComments[i].getElementsByTagName('name')[0];
var name = nameElem.childNodes[0].nodeValue;
var commentElem = savedComments[i].getElementsByTagName('text')[0];
var commentText = commentElem.childNodes[0].nodeValue;
renderComment(name, commentText);
}
}</script>
  </body>
</html>
